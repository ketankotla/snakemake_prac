
samples = ["A", "B", "C"]



rule sort:
	input:
		"mapped/{sample}.bam",
	output:
		"mapped/{sample}.sorted.bam",
	conda:
		"environment.yaml"

rule call:
	input:
		fa="data/genome.fa",
		bam=expand("mapped/{sample}.sorted.bam", sample=samples)
	output:
		"calls/all.vcf"
	shell:
		"samtools mpileup -g -f {input.fa} {input.bam} | bcftools call -mv - > {output}"
	conda:
		"env5.yaml"